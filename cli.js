"use strict";var Gi=Object.create;var Or=Object.defineProperty;var Qi=Object.getOwnPropertyDescriptor;var Ui=Object.getOwnPropertyNames;var ki=Object.getPrototypeOf,Wi=Object.prototype.hasOwnProperty;var i=(e,r)=>Or(e,"name",{value:r,configurable:!0});var p=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Vi=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of Ui(r))!Wi.call(e,s)&&s!==t&&Or(e,s,{get:()=>r[s],enumerable:!(n=Qi(r,s))||n.enumerable});return e};var It=(e,r,t)=>(t=e!=null?Gi(ki(e)):{},Vi(r||!e||!e.__esModule?Or(t,"default",{value:e,enumerable:!0}):t,e));var Sr=p(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.FormatterOptions=void 0;var Pr=class{static{i(this,"FormatterOptions")}constructor(r={}){var t;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,r||{}),typeof r?.quoteHeaders>"u"&&(this.quoteHeaders=this.quoteColumns),r?.quote===!0?this.quote='"':r?.quote===!1&&(this.quote=""),typeof r?.escape!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((t=r.writeHeaders)!==null&&t!==void 0?t:!0),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}};Re.FormatterOptions=Pr});var Fe=p((ec,Bt)=>{var Ki="[object AsyncFunction]",Xi="[object Function]",Yi="[object GeneratorFunction]",zi="[object Null]",Ji="[object Proxy]",Zi="[object Undefined]",es=typeof global=="object"&&global&&global.Object===Object&&global,rs=typeof self=="object"&&self&&self.Object===Object&&self,ts=es||rs||Function("return this")(),Lt=Object.prototype,ns=Lt.hasOwnProperty,Nt=Lt.toString,Ht=ts.Symbol,U=Ht?Ht.toStringTag:void 0;function is(e){return e==null?e===void 0?Zi:zi:U&&U in Object(e)?ss(e):as(e)}i(is,"baseGetTag");function ss(e){var r=ns.call(e,U),t=e[U];try{e[U]=void 0;var n=!0}catch{}var s=Nt.call(e);return n&&(r?e[U]=t:delete e[U]),s}i(ss,"getRawTag");function as(e){return Nt.call(e)}i(as,"objectToString");function os(e){if(!us(e))return!1;var r=is(e);return r==Xi||r==Yi||r==Ki||r==Ji}i(os,"isFunction");function us(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}i(us,"isObject");Bt.exports=os});var vn=p((Te,Z)=>{var ls=200,Hr="__lodash_hash_undefined__",Ne=1,Jt=2,Zt=9007199254740991,Me="[object Arguments]",Rr="[object Array]",fs="[object AsyncFunction]",en="[object Boolean]",rn="[object Date]",tn="[object Error]",nn="[object Function]",cs="[object GeneratorFunction]",xe="[object Map]",sn="[object Number]",hs="[object Null]",J="[object Object]",$t="[object Promise]",ds="[object Proxy]",an="[object RegExp]",qe="[object Set]",on="[object String]",ps="[object Symbol]",_s="[object Undefined]",Fr="[object WeakMap]",un="[object ArrayBuffer]",De="[object DataView]",gs="[object Float32Array]",ms="[object Float64Array]",ys="[object Int8Array]",ws="[object Int16Array]",bs="[object Int32Array]",Ts="[object Uint8Array]",vs="[object Uint8ClampedArray]",Cs="[object Uint16Array]",Os="[object Uint32Array]",Ps=/[\\^$.*+?()[\]{}|]/g,Ss=/^\[object .+?Constructor\]$/,As=/^(?:0|[1-9]\d*)$/,w={};w[gs]=w[ms]=w[ys]=w[ws]=w[bs]=w[Ts]=w[vs]=w[Cs]=w[Os]=!0;w[Me]=w[Rr]=w[un]=w[en]=w[De]=w[rn]=w[tn]=w[nn]=w[xe]=w[sn]=w[J]=w[an]=w[qe]=w[on]=w[Fr]=!1;var ln=typeof global=="object"&&global&&global.Object===Object&&global,js=typeof self=="object"&&self&&self.Object===Object&&self,F=ln||js||Function("return this")(),fn=typeof Te=="object"&&Te&&!Te.nodeType&&Te,Gt=fn&&typeof Z=="object"&&Z&&!Z.nodeType&&Z,cn=Gt&&Gt.exports===fn,Ar=cn&&ln.process,Qt=function(){try{return Ar&&Ar.binding&&Ar.binding("util")}catch{}}(),Ut=Qt&&Qt.isTypedArray;function Es(e,r){for(var t=-1,n=e==null?0:e.length,s=0,a=[];++t<n;){var o=e[t];r(o,t,e)&&(a[s++]=o)}return a}i(Es,"arrayFilter");function Rs(e,r){for(var t=-1,n=r.length,s=e.length;++t<n;)e[s+t]=r[t];return e}i(Rs,"arrayPush");function Fs(e,r){for(var t=-1,n=e==null?0:e.length;++t<n;)if(r(e[t],t,e))return!0;return!1}i(Fs,"arraySome");function Ms(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}i(Ms,"baseTimes");function xs(e){return function(r){return e(r)}}i(xs,"baseUnary");function qs(e,r){return e.has(r)}i(qs,"cacheHas");function Ds(e,r){return e?.[r]}i(Ds,"getValue");function Is(e){var r=-1,t=Array(e.size);return e.forEach(function(n,s){t[++r]=[s,n]}),t}i(Is,"mapToArray");function Hs(e,r){return function(t){return e(r(t))}}i(Hs,"overArg");function Ls(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=n}),t}i(Ls,"setToArray");var Ns=Array.prototype,Bs=Function.prototype,Be=Object.prototype,jr=F["__core-js_shared__"],hn=Bs.toString,S=Be.hasOwnProperty,kt=function(){var e=/[^.]+$/.exec(jr&&jr.keys&&jr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),dn=Be.toString,$s=RegExp("^"+hn.call(S).replace(Ps,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt=cn?F.Buffer:void 0,Ie=F.Symbol,Vt=F.Uint8Array,pn=Be.propertyIsEnumerable,Gs=Ns.splice,k=Ie?Ie.toStringTag:void 0,Kt=Object.getOwnPropertySymbols,Qs=Wt?Wt.isBuffer:void 0,Us=Hs(Object.keys,Object),Mr=ee(F,"DataView"),ve=ee(F,"Map"),xr=ee(F,"Promise"),qr=ee(F,"Set"),Dr=ee(F,"WeakMap"),Ce=ee(Object,"create"),ks=K(Mr),Ws=K(ve),Vs=K(xr),Ks=K(qr),Xs=K(Dr),Xt=Ie?Ie.prototype:void 0,Er=Xt?Xt.valueOf:void 0;function W(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}i(W,"Hash");function Ys(){this.__data__=Ce?Ce(null):{},this.size=0}i(Ys,"hashClear");function zs(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}i(zs,"hashDelete");function Js(e){var r=this.__data__;if(Ce){var t=r[e];return t===Hr?void 0:t}return S.call(r,e)?r[e]:void 0}i(Js,"hashGet");function Zs(e){var r=this.__data__;return Ce?r[e]!==void 0:S.call(r,e)}i(Zs,"hashHas");function ea(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Ce&&r===void 0?Hr:r,this}i(ea,"hashSet");W.prototype.clear=Ys;W.prototype.delete=zs;W.prototype.get=Js;W.prototype.has=Zs;W.prototype.set=ea;function M(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}i(M,"ListCache");function ra(){this.__data__=[],this.size=0}i(ra,"listCacheClear");function ta(e){var r=this.__data__,t=$e(r,e);if(t<0)return!1;var n=r.length-1;return t==n?r.pop():Gs.call(r,t,1),--this.size,!0}i(ta,"listCacheDelete");function na(e){var r=this.__data__,t=$e(r,e);return t<0?void 0:r[t][1]}i(na,"listCacheGet");function ia(e){return $e(this.__data__,e)>-1}i(ia,"listCacheHas");function sa(e,r){var t=this.__data__,n=$e(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this}i(sa,"listCacheSet");M.prototype.clear=ra;M.prototype.delete=ta;M.prototype.get=na;M.prototype.has=ia;M.prototype.set=sa;function V(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}i(V,"MapCache");function aa(){this.size=0,this.__data__={hash:new W,map:new(ve||M),string:new W}}i(aa,"mapCacheClear");function oa(e){var r=Ge(this,e).delete(e);return this.size-=r?1:0,r}i(oa,"mapCacheDelete");function ua(e){return Ge(this,e).get(e)}i(ua,"mapCacheGet");function la(e){return Ge(this,e).has(e)}i(la,"mapCacheHas");function fa(e,r){var t=Ge(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this}i(fa,"mapCacheSet");V.prototype.clear=aa;V.prototype.delete=oa;V.prototype.get=ua;V.prototype.has=la;V.prototype.set=fa;function He(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new V;++r<t;)this.add(e[r])}i(He,"SetCache");function ca(e){return this.__data__.set(e,Hr),this}i(ca,"setCacheAdd");function ha(e){return this.__data__.has(e)}i(ha,"setCacheHas");He.prototype.add=He.prototype.push=ca;He.prototype.has=ha;function H(e){var r=this.__data__=new M(e);this.size=r.size}i(H,"Stack");function da(){this.__data__=new M,this.size=0}i(da,"stackClear");function pa(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}i(pa,"stackDelete");function _a(e){return this.__data__.get(e)}i(_a,"stackGet");function ga(e){return this.__data__.has(e)}i(ga,"stackHas");function ma(e,r){var t=this.__data__;if(t instanceof M){var n=t.__data__;if(!ve||n.length<ls-1)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new V(n)}return t.set(e,r),this.size=t.size,this}i(ma,"stackSet");H.prototype.clear=da;H.prototype.delete=pa;H.prototype.get=_a;H.prototype.has=ga;H.prototype.set=ma;function ya(e,r){var t=Le(e),n=!t&&xa(e),s=!t&&!n&&Ir(e),a=!t&&!n&&!s&&Tn(e),o=t||n||s||a,u=o?Ms(e.length,String):[],l=u.length;for(var f in e)(r||S.call(e,f))&&!(o&&(f=="length"||s&&(f=="offset"||f=="parent")||a&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||ja(f,l)))&&u.push(f);return u}i(ya,"arrayLikeKeys");function $e(e,r){for(var t=e.length;t--;)if(mn(e[t][0],r))return t;return-1}i($e,"assocIndexOf");function wa(e,r,t){var n=r(e);return Le(e)?n:Rs(n,t(e))}i(wa,"baseGetAllKeys");function Pe(e){return e==null?e===void 0?_s:hs:k&&k in Object(e)?Sa(e):Ma(e)}i(Pe,"baseGetTag");function Yt(e){return Oe(e)&&Pe(e)==Me}i(Yt,"baseIsArguments");function _n(e,r,t,n,s){return e===r?!0:e==null||r==null||!Oe(e)&&!Oe(r)?e!==e&&r!==r:ba(e,r,t,n,_n,s)}i(_n,"baseIsEqual");function ba(e,r,t,n,s,a){var o=Le(e),u=Le(r),l=o?Rr:I(e),f=u?Rr:I(r);l=l==Me?J:l,f=f==Me?J:f;var c=l==J,d=f==J,h=l==f;if(h&&Ir(e)){if(!Ir(r))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new H),o||Tn(e)?gn(e,r,t,n,s,a):Oa(e,r,l,t,n,s,a);if(!(t&Ne)){var m=c&&S.call(e,"__wrapped__"),y=d&&S.call(r,"__wrapped__");if(m||y){var C=m?e.value():e,v=y?r.value():r;return a||(a=new H),s(C,v,t,n,a)}}return h?(a||(a=new H),Pa(e,r,t,n,s,a)):!1}i(ba,"baseIsEqualDeep");function Ta(e){if(!bn(e)||Ra(e))return!1;var r=yn(e)?$s:Ss;return r.test(K(e))}i(Ta,"baseIsNative");function va(e){return Oe(e)&&wn(e.length)&&!!w[Pe(e)]}i(va,"baseIsTypedArray");function Ca(e){if(!Fa(e))return Us(e);var r=[];for(var t in Object(e))S.call(e,t)&&t!="constructor"&&r.push(t);return r}i(Ca,"baseKeys");function gn(e,r,t,n,s,a){var o=t&Ne,u=e.length,l=r.length;if(u!=l&&!(o&&l>u))return!1;var f=a.get(e);if(f&&a.get(r))return f==r;var c=-1,d=!0,h=t&Jt?new He:void 0;for(a.set(e,r),a.set(r,e);++c<u;){var m=e[c],y=r[c];if(n)var C=o?n(y,m,c,r,e,a):n(m,y,c,e,r,a);if(C!==void 0){if(C)continue;d=!1;break}if(h){if(!Fs(r,function(v,P){if(!qs(h,P)&&(m===v||s(m,v,t,n,a)))return h.push(P)})){d=!1;break}}else if(!(m===y||s(m,y,t,n,a))){d=!1;break}}return a.delete(e),a.delete(r),d}i(gn,"equalArrays");function Oa(e,r,t,n,s,a,o){switch(t){case De:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case un:return!(e.byteLength!=r.byteLength||!a(new Vt(e),new Vt(r)));case en:case rn:case sn:return mn(+e,+r);case tn:return e.name==r.name&&e.message==r.message;case an:case on:return e==r+"";case xe:var u=Is;case qe:var l=n&Ne;if(u||(u=Ls),e.size!=r.size&&!l)return!1;var f=o.get(e);if(f)return f==r;n|=Jt,o.set(e,r);var c=gn(u(e),u(r),n,s,a,o);return o.delete(e),c;case ps:if(Er)return Er.call(e)==Er.call(r)}return!1}i(Oa,"equalByTag");function Pa(e,r,t,n,s,a){var o=t&Ne,u=zt(e),l=u.length,f=zt(r),c=f.length;if(l!=c&&!o)return!1;for(var d=l;d--;){var h=u[d];if(!(o?h in r:S.call(r,h)))return!1}var m=a.get(e);if(m&&a.get(r))return m==r;var y=!0;a.set(e,r),a.set(r,e);for(var C=o;++d<l;){h=u[d];var v=e[h],P=r[h];if(n)var be=o?n(P,v,h,r,e,a):n(v,P,h,e,r,a);if(!(be===void 0?v===P||s(v,P,t,n,a):be)){y=!1;break}C||(C=h=="constructor")}if(y&&!C){var E=e.constructor,R=r.constructor;E!=R&&"constructor"in e&&"constructor"in r&&!(typeof E=="function"&&E instanceof E&&typeof R=="function"&&R instanceof R)&&(y=!1)}return a.delete(e),a.delete(r),y}i(Pa,"equalObjects");function zt(e){return wa(e,Ia,Aa)}i(zt,"getAllKeys");function Ge(e,r){var t=e.__data__;return Ea(r)?t[typeof r=="string"?"string":"hash"]:t.map}i(Ge,"getMapData");function ee(e,r){var t=Ds(e,r);return Ta(t)?t:void 0}i(ee,"getNative");function Sa(e){var r=S.call(e,k),t=e[k];try{e[k]=void 0;var n=!0}catch{}var s=dn.call(e);return n&&(r?e[k]=t:delete e[k]),s}i(Sa,"getRawTag");var Aa=Kt?function(e){return e==null?[]:(e=Object(e),Es(Kt(e),function(r){return pn.call(e,r)}))}:Ha,I=Pe;(Mr&&I(new Mr(new ArrayBuffer(1)))!=De||ve&&I(new ve)!=xe||xr&&I(xr.resolve())!=$t||qr&&I(new qr)!=qe||Dr&&I(new Dr)!=Fr)&&(I=i(function(e){var r=Pe(e),t=r==J?e.constructor:void 0,n=t?K(t):"";if(n)switch(n){case ks:return De;case Ws:return xe;case Vs:return $t;case Ks:return qe;case Xs:return Fr}return r},"getTag"));function ja(e,r){return r=r??Zt,!!r&&(typeof e=="number"||As.test(e))&&e>-1&&e%1==0&&e<r}i(ja,"isIndex");function Ea(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}i(Ea,"isKeyable");function Ra(e){return!!kt&&kt in e}i(Ra,"isMasked");function Fa(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||Be;return e===t}i(Fa,"isPrototype");function Ma(e){return dn.call(e)}i(Ma,"objectToString");function K(e){if(e!=null){try{return hn.call(e)}catch{}try{return e+""}catch{}}return""}i(K,"toSource");function mn(e,r){return e===r||e!==e&&r!==r}i(mn,"eq");var xa=Yt(function(){return arguments}())?Yt:function(e){return Oe(e)&&S.call(e,"callee")&&!pn.call(e,"callee")},Le=Array.isArray;function qa(e){return e!=null&&wn(e.length)&&!yn(e)}i(qa,"isArrayLike");var Ir=Qs||La;function Da(e,r){return _n(e,r)}i(Da,"isEqual");function yn(e){if(!bn(e))return!1;var r=Pe(e);return r==nn||r==cs||r==fs||r==ds}i(yn,"isFunction");function wn(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Zt}i(wn,"isLength");function bn(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}i(bn,"isObject");function Oe(e){return e!=null&&typeof e=="object"}i(Oe,"isObjectLike");var Tn=Ut?xs(Ut):va;function Ia(e){return qa(e)?ya(e):Ca(e)}i(Ia,"keys");function Ha(){return[]}i(Ha,"stubArray");function La(){return!1}i(La,"stubFalse");Z.exports=Da});var On=p((nc,Cn)=>{var Na="[object Boolean]",Ba=Object.prototype,$a=Ba.toString;function Ga(e){return e===!0||e===!1||Qa(e)&&$a.call(e)==Na}i(Ga,"isBoolean");function Qa(e){return!!e&&typeof e=="object"}i(Qa,"isObjectLike");Cn.exports=Ga});var Lr=p((sc,Pn)=>{function Ua(e){return e==null}i(Ua,"isNil");Pn.exports=Ua});var Nr=p((oc,Rn)=>{var ka=1/0,Wa="[object Symbol]",En=/[\\^$.*+?()[\]{}|]/g,Va=RegExp(En.source),Ka=typeof global=="object"&&global&&global.Object===Object&&global,Xa=typeof self=="object"&&self&&self.Object===Object&&self,Ya=Ka||Xa||Function("return this")(),za=Object.prototype,Ja=za.toString,Sn=Ya.Symbol,An=Sn?Sn.prototype:void 0,jn=An?An.toString:void 0;function Za(e){if(typeof e=="string")return e;if(ro(e))return jn?jn.call(e):"";var r=e+"";return r=="0"&&1/e==-ka?"-0":r}i(Za,"baseToString");function eo(e){return!!e&&typeof e=="object"}i(eo,"isObjectLike");function ro(e){return typeof e=="symbol"||eo(e)&&Ja.call(e)==Wa}i(ro,"isSymbol");function to(e){return e==null?"":Za(e)}i(to,"toString");function no(e){return e=to(e),e&&Va.test(e)?e.replace(En,"\\$&"):e}i(no,"escapeRegExp");Rn.exports=no});var Gr=p(re=>{"use strict";var $r=re&&re.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(re,"__esModule",{value:!0});re.FieldFormatter=void 0;var io=$r(On()),so=$r(Lr()),ao=$r(Nr()),Br=class{static{i(this,"FieldFormatter")}constructor(r){this._headers=null,this.formatterOptions=r,r.headers!==null&&(this.headers=r.headers),this.REPLACE_REGEXP=new RegExp(r.quote,"g");let t=`[${r.delimiter}${ao.default(r.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(t)}set headers(r){this._headers=r}shouldQuote(r,t){let n=t?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return io.default(n)?n:Array.isArray(n)?n[r]:this._headers!==null?n[this._headers[r]]:!1}format(r,t,n){let s=`${so.default(r)?"":r}`.replace(/\0/g,""),{formatterOptions:a}=this;return a.quote!==""&&s.indexOf(a.quote)!==-1?this.quoteField(s.replace(this.REPLACE_REGEXP,a.escapedQuote)):s.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(t,n)?this.quoteField(s):s}quoteField(r){let{quote:t}=this.formatterOptions;return`${t}${r}${t}`}};re.FieldFormatter=Br});var Qr=p(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.isSyncTransform=void 0;Qe.isSyncTransform=e=>e.length===1});var Mn=p(te=>{"use strict";var Fn=te&&te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(te,"__esModule",{value:!0});te.RowFormatter=void 0;var oo=Fn(Fe()),uo=Fn(vn()),lo=Gr(),fo=Qr(),Ur=class e{static{i(this,"RowFormatter")}constructor(r){this.rowCount=0,this.formatterOptions=r,this.fieldFormatter=new lo.FieldFormatter(r),this.headers=r.headers,this.shouldWriteHeaders=r.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),r.transform&&(this.rowTransform=r.transform)}static isRowHashArray(r){return Array.isArray(r)?Array.isArray(r[0])&&r[0].length===2:!1}static isRowArray(r){return Array.isArray(r)&&!this.isRowHashArray(r)}static gatherHeaders(r){return e.isRowHashArray(r)?r.map(t=>t[0]):Array.isArray(r)?r:Object.keys(r)}static createTransform(r){return fo.isSyncTransform(r)?(t,n)=>{let s=null;try{s=r(t)}catch(a){return n(a)}return n(null,s)}:(t,n)=>{r(t,n)}}set rowTransform(r){if(!oo.default(r))throw new TypeError("The transform should be a function");this._rowTransform=e.createTransform(r)}format(r,t){this.callTransformer(r,(n,s)=>{if(n)return t(n);if(!r)return t(null);let a=[];if(s){let{shouldFormatColumns:o,headers:u}=this.checkHeaders(s);if(this.shouldWriteHeaders&&u&&!this.hasWrittenHeaders&&(a.push(this.formatColumns(u,!0)),this.hasWrittenHeaders=!0),o){let l=this.gatherColumns(s);a.push(this.formatColumns(l,!1))}}return t(null,a)})}finish(r){let t=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return r(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));t.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&t.push(this.formatterOptions.rowDelimiter),r(null,t)}checkHeaders(r){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};let t=e.gatherHeaders(r);return this.headers=t,this.fieldFormatter.headers=t,this.shouldWriteHeaders?{shouldFormatColumns:!uo.default(t,r),headers:t}:{shouldFormatColumns:!0,headers:null}}gatherColumns(r){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(r)?e.isRowHashArray(r)?this.headers.map((t,n)=>{let s=r[n];return s?s[1]:""}):e.isRowArray(r)&&!this.shouldWriteHeaders?r:this.headers.map((t,n)=>r[n]):this.headers.map(t=>r[t])}callTransformer(r,t){return this._rowTransform?this._rowTransform(r,t):t(null,r)}formatColumns(r,t){let n=r.map((a,o)=>this.fieldFormatter.format(a,o,t)).join(this.formatterOptions.delimiter),{rowCount:s}=this;return this.rowCount+=1,s?[this.formatterOptions.rowDelimiter,n].join(""):n}};te.RowFormatter=Ur});var xn=p(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.FieldFormatter=ne.RowFormatter=void 0;var co=Mn();Object.defineProperty(ne,"RowFormatter",{enumerable:!0,get:function(){return co.RowFormatter}});var ho=Gr();Object.defineProperty(ne,"FieldFormatter",{enumerable:!0,get:function(){return ho.FieldFormatter}})});var Wr=p(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.CsvFormatterStream=void 0;var po=require("stream"),_o=xn(),kr=class extends po.Transform{static{i(this,"CsvFormatterStream")}constructor(r){super({writableObjectMode:r.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=r,this.rowFormatter=new _o.RowFormatter(r),this.hasWrittenBOM=!r.writeBOM}transform(r){return this.rowFormatter.rowTransform=r,this}_transform(r,t,n){let s=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(r,(a,o)=>a?(s=!0,n(a)):(o&&o.forEach(u=>{this.push(Buffer.from(u,"utf8"))}),s=!0,n()))}catch(a){if(s)throw a;n(a)}}_flush(r){this.rowFormatter.finish((t,n)=>t?r(t):(n&&n.forEach(s=>{this.push(Buffer.from(s,"utf8"))}),r()))}};Ue.CsvFormatterStream=kr});var Dn=p(_=>{"use strict";var qn=_&&_.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),go=_&&_.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),mo=_&&_.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&qn(r,e,t);return go(r,e),r},yo=_&&_.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&qn(r,e,t)};Object.defineProperty(_,"__esModule",{value:!0});_.writeToPath=_.writeToString=_.writeToBuffer=_.writeToStream=_.write=_.format=_.FormatterOptions=_.CsvFormatterStream=void 0;var wo=require("util"),bo=require("stream"),To=mo(require("fs")),vo=Sr(),Co=Wr();yo(Qr(),_);var Oo=Wr();Object.defineProperty(_,"CsvFormatterStream",{enumerable:!0,get:function(){return Oo.CsvFormatterStream}});var Po=Sr();Object.defineProperty(_,"FormatterOptions",{enumerable:!0,get:function(){return Po.FormatterOptions}});_.format=e=>new Co.CsvFormatterStream(new vo.FormatterOptions(e));_.write=(e,r)=>{let t=_.format(r),n=wo.promisify((s,a)=>{t.write(s,void 0,a)});return e.reduce((s,a)=>s.then(()=>n(a)),Promise.resolve()).then(()=>t.end()).catch(s=>{t.emit("error",s)}),t};_.writeToStream=(e,r,t)=>_.write(r,t).pipe(e);_.writeToBuffer=(e,r={})=>{let t=[],n=new bo.Writable({write(s,a,o){t.push(s),o()}});return new Promise((s,a)=>{n.on("error",a).on("finish",()=>s(Buffer.concat(t))),_.write(e,r).pipe(n)})};_.writeToString=(e,r)=>_.writeToBuffer(e,r).then(t=>t.toString());_.writeToPath=(e,r,t)=>{let n=To.createWriteStream(e,{encoding:"utf8"});return _.write(r,t).pipe(n)}});var Kr=p(ie=>{"use strict";var In=ie&&ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ie,"__esModule",{value:!0});ie.ParserOptions=void 0;var So=In(Nr()),Ao=In(Lr()),Vr=class{static{i(this,"ParserOptions")}constructor(r){var t;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,r||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=So.default(this.delimiter),this.escapeChar=(t=this.escape)!==null&&t!==void 0?t:this.quote,this.supportsComments=!Ao.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}};ie.ParserOptions=Vr});var Xr=p(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.isSyncValidate=se.isSyncTransform=void 0;se.isSyncTransform=e=>e.length===1;se.isSyncValidate=e=>e.length===1});var Nn=p(ae=>{"use strict";var jo=ae&&ae.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ae,"__esModule",{value:!0});ae.RowTransformerValidator=void 0;var Hn=jo(Fe()),Ln=Xr(),Yr=class e{static{i(this,"RowTransformerValidator")}constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(r){return Ln.isSyncTransform(r)?(t,n)=>{let s=null;try{s=r(t)}catch(a){return n(a)}return n(null,s)}:r}static createValidator(r){return Ln.isSyncValidate(r)?(t,n)=>{n(null,{row:t,isValid:r(t)})}:(t,n)=>{r(t,(s,a,o)=>s?n(s):a?n(null,{row:t,isValid:a,reason:o}):n(null,{row:t,isValid:!1,reason:o}))}}set rowTransform(r){if(!Hn.default(r))throw new TypeError("The transform should be a function");this._rowTransform=e.createTransform(r)}set rowValidator(r){if(!Hn.default(r))throw new TypeError("The validate should be a function");this._rowValidator=e.createValidator(r)}transformAndValidate(r,t){return this.callTransformer(r,(n,s)=>n?t(n):s?this.callValidator(s,(a,o)=>a?t(a):o&&!o.isValid?t(null,{row:s,isValid:!1,reason:o.reason}):t(null,{row:s,isValid:!0})):t(null,{row:null,isValid:!0}))}callTransformer(r,t){return this._rowTransform?this._rowTransform(r,t):t(null,r)}callValidator(r,t){return this._rowValidator?this._rowValidator(r,t):t(null,{row:r,isValid:!0})}};ae.RowTransformerValidator=Yr});var $n=p((Cc,Bn)=>{function Eo(e){return e===void 0}i(Eo,"isUndefined");Bn.exports=Eo});var Kn=p((Pc,Vn)=>{var Ro=200,Zr="__lodash_hash_undefined__",Fo=1/0,Mo="[object Function]",xo="[object GeneratorFunction]",qo=/[\\^$.*+?()[\]{}|]/g,Do=/^\[object .+?Constructor\]$/,Io=typeof global=="object"&&global&&global.Object===Object&&global,Ho=typeof self=="object"&&self&&self.Object===Object&&self,et=Io||Ho||Function("return this")();function Lo(e,r){var t=e?e.length:0;return!!t&&$o(e,r,0)>-1}i(Lo,"arrayIncludes");function No(e,r,t){for(var n=-1,s=e?e.length:0;++n<s;)if(t(r,e[n]))return!0;return!1}i(No,"arrayIncludesWith");function Bo(e,r,t,n){for(var s=e.length,a=t+(n?1:-1);n?a--:++a<s;)if(r(e[a],a,e))return a;return-1}i(Bo,"baseFindIndex");function $o(e,r,t){if(r!==r)return Bo(e,Go,t);for(var n=t-1,s=e.length;++n<s;)if(e[n]===r)return n;return-1}i($o,"baseIndexOf");function Go(e){return e!==e}i(Go,"baseIsNaN");function Qo(e,r){return e.has(r)}i(Qo,"cacheHas");function Uo(e,r){return e?.[r]}i(Uo,"getValue");function ko(e){var r=!1;if(e!=null&&typeof e.toString!="function")try{r=!!(e+"")}catch{}return r}i(ko,"isHostObject");function Qn(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=n}),t}i(Qn,"setToArray");var Wo=Array.prototype,Vo=Function.prototype,Un=Object.prototype,zr=et["__core-js_shared__"],Gn=function(){var e=/[^.]+$/.exec(zr&&zr.keys&&zr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),kn=Vo.toString,rt=Un.hasOwnProperty,Ko=Un.toString,Xo=RegExp("^"+kn.call(rt).replace(qo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yo=Wo.splice,zo=tt(et,"Map"),Jr=tt(et,"Set"),Se=tt(Object,"create");function X(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}i(X,"Hash");function Jo(){this.__data__=Se?Se(null):{}}i(Jo,"hashClear");function Zo(e){return this.has(e)&&delete this.__data__[e]}i(Zo,"hashDelete");function eu(e){var r=this.__data__;if(Se){var t=r[e];return t===Zr?void 0:t}return rt.call(r,e)?r[e]:void 0}i(eu,"hashGet");function ru(e){var r=this.__data__;return Se?r[e]!==void 0:rt.call(r,e)}i(ru,"hashHas");function tu(e,r){var t=this.__data__;return t[e]=Se&&r===void 0?Zr:r,this}i(tu,"hashSet");X.prototype.clear=Jo;X.prototype.delete=Zo;X.prototype.get=eu;X.prototype.has=ru;X.prototype.set=tu;function oe(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}i(oe,"ListCache");function nu(){this.__data__=[]}i(nu,"listCacheClear");function iu(e){var r=this.__data__,t=We(r,e);if(t<0)return!1;var n=r.length-1;return t==n?r.pop():Yo.call(r,t,1),!0}i(iu,"listCacheDelete");function su(e){var r=this.__data__,t=We(r,e);return t<0?void 0:r[t][1]}i(su,"listCacheGet");function au(e){return We(this.__data__,e)>-1}i(au,"listCacheHas");function ou(e,r){var t=this.__data__,n=We(t,e);return n<0?t.push([e,r]):t[n][1]=r,this}i(ou,"listCacheSet");oe.prototype.clear=nu;oe.prototype.delete=iu;oe.prototype.get=su;oe.prototype.has=au;oe.prototype.set=ou;function ue(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}i(ue,"MapCache");function uu(){this.__data__={hash:new X,map:new(zo||oe),string:new X}}i(uu,"mapCacheClear");function lu(e){return Ve(this,e).delete(e)}i(lu,"mapCacheDelete");function fu(e){return Ve(this,e).get(e)}i(fu,"mapCacheGet");function cu(e){return Ve(this,e).has(e)}i(cu,"mapCacheHas");function hu(e,r){return Ve(this,e).set(e,r),this}i(hu,"mapCacheSet");ue.prototype.clear=uu;ue.prototype.delete=lu;ue.prototype.get=fu;ue.prototype.has=cu;ue.prototype.set=hu;function ke(e){var r=-1,t=e?e.length:0;for(this.__data__=new ue;++r<t;)this.add(e[r])}i(ke,"SetCache");function du(e){return this.__data__.set(e,Zr),this}i(du,"setCacheAdd");function pu(e){return this.__data__.has(e)}i(pu,"setCacheHas");ke.prototype.add=ke.prototype.push=du;ke.prototype.has=pu;function We(e,r){for(var t=e.length;t--;)if(vu(e[t][0],r))return t;return-1}i(We,"assocIndexOf");function _u(e){if(!Wn(e)||wu(e))return!1;var r=Cu(e)||ko(e)?Xo:Do;return r.test(bu(e))}i(_u,"baseIsNative");function gu(e,r,t){var n=-1,s=Lo,a=e.length,o=!0,u=[],l=u;if(t)o=!1,s=No;else if(a>=Ro){var f=r?null:mu(e);if(f)return Qn(f);o=!1,s=Qo,l=new ke}else l=r?[]:u;e:for(;++n<a;){var c=e[n],d=r?r(c):c;if(c=t||c!==0?c:0,o&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;r&&l.push(d),u.push(c)}else s(l,d,t)||(l!==u&&l.push(d),u.push(c))}return u}i(gu,"baseUniq");var mu=Jr&&1/Qn(new Jr([,-0]))[1]==Fo?function(e){return new Jr(e)}:Ou;function Ve(e,r){var t=e.__data__;return yu(r)?t[typeof r=="string"?"string":"hash"]:t.map}i(Ve,"getMapData");function tt(e,r){var t=Uo(e,r);return _u(t)?t:void 0}i(tt,"getNative");function yu(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}i(yu,"isKeyable");function wu(e){return!!Gn&&Gn in e}i(wu,"isMasked");function bu(e){if(e!=null){try{return kn.call(e)}catch{}try{return e+""}catch{}}return""}i(bu,"toSource");function Tu(e){return e&&e.length?gu(e):[]}i(Tu,"uniq");function vu(e,r){return e===r||e!==e&&r!==r}i(vu,"eq");function Cu(e){var r=Wn(e)?Ko.call(e):"";return r==Mo||r==xo}i(Cu,"isFunction");function Wn(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}i(Wn,"isObject");function Ou(){}i(Ou,"noop");Vn.exports=Tu});var Ai=p((Ae,fe)=>{var Pu=200,Su="Expected a function",ht="__lodash_hash_undefined__",rr=1,ce=2,ii=1/0,si=9007199254740991,Ke="[object Arguments]",st="[object Array]",ai="[object Boolean]",oi="[object Date]",ui="[object Error]",li="[object Function]",Au="[object GeneratorFunction]",Xe="[object Map]",fi="[object Number]",le="[object Object]",Xn="[object Promise]",ci="[object RegExp]",Ye="[object Set]",hi="[object String]",di="[object Symbol]",at="[object WeakMap]",pi="[object ArrayBuffer]",ze="[object DataView]",ju="[object Float32Array]",Eu="[object Float64Array]",Ru="[object Int8Array]",Fu="[object Int16Array]",Mu="[object Int32Array]",xu="[object Uint8Array]",qu="[object Uint8ClampedArray]",Du="[object Uint16Array]",Iu="[object Uint32Array]",Hu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lu=/^\w*$/,Nu=/^\./,Bu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$u=/[\\^$.*+?()[\]{}|]/g,Gu=/\\(\\)?/g,Qu=/^\[object .+?Constructor\]$/,Uu=/^(?:0|[1-9]\d*)$/,b={};b[ju]=b[Eu]=b[Ru]=b[Fu]=b[Mu]=b[xu]=b[qu]=b[Du]=b[Iu]=!0;b[Ke]=b[st]=b[pi]=b[ai]=b[ze]=b[oi]=b[ui]=b[li]=b[Xe]=b[fi]=b[le]=b[ci]=b[Ye]=b[hi]=b[at]=!1;var _i=typeof global=="object"&&global&&global.Object===Object&&global,ku=typeof self=="object"&&self&&self.Object===Object&&self,B=_i||ku||Function("return this")(),gi=typeof Ae=="object"&&Ae&&!Ae.nodeType&&Ae,Yn=gi&&typeof fe=="object"&&fe&&!fe.nodeType&&fe,Wu=Yn&&Yn.exports===gi,zn=Wu&&_i.process,Jn=function(){try{return zn&&zn.binding("util")}catch{}}(),Zn=Jn&&Jn.isTypedArray;function Vu(e,r,t,n){for(var s=-1,a=e?e.length:0;++s<a;){var o=e[s];r(n,o,t(o),e)}return n}i(Vu,"arrayAggregator");function Ku(e,r){for(var t=-1,n=e?e.length:0;++t<n;)if(r(e[t],t,e))return!0;return!1}i(Ku,"arraySome");function Xu(e){return function(r){return r?.[e]}}i(Xu,"baseProperty");function Yu(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}i(Yu,"baseTimes");function zu(e){return function(r){return e(r)}}i(zu,"baseUnary");function Ju(e,r){return e?.[r]}i(Ju,"getValue");function ot(e){var r=!1;if(e!=null&&typeof e.toString!="function")try{r=!!(e+"")}catch{}return r}i(ot,"isHostObject");function Zu(e){var r=-1,t=Array(e.size);return e.forEach(function(n,s){t[++r]=[s,n]}),t}i(Zu,"mapToArray");function el(e,r){return function(t){return e(r(t))}}i(el,"overArg");function rl(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=n}),t}i(rl,"setToArray");var tl=Array.prototype,nl=Function.prototype,tr=Object.prototype,nt=B["__core-js_shared__"],ei=function(){var e=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),mi=nl.toString,A=tr.hasOwnProperty,he=tr.toString,il=RegExp("^"+mi.call(A).replace($u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ri=B.Symbol,ti=B.Uint8Array,sl=tr.propertyIsEnumerable,al=tl.splice,ol=el(Object.keys,Object),ut=de(B,"DataView"),je=de(B,"Map"),lt=de(B,"Promise"),ft=de(B,"Set"),ct=de(B,"WeakMap"),Ee=de(Object,"create"),ul=z(ut),ll=z(je),fl=z(lt),cl=z(ft),hl=z(ct),Je=ri?ri.prototype:void 0,it=Je?Je.valueOf:void 0,ni=Je?Je.toString:void 0;function Y(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}i(Y,"Hash");function dl(){this.__data__=Ee?Ee(null):{}}i(dl,"hashClear");function pl(e){return this.has(e)&&delete this.__data__[e]}i(pl,"hashDelete");function _l(e){var r=this.__data__;if(Ee){var t=r[e];return t===ht?void 0:t}return A.call(r,e)?r[e]:void 0}i(_l,"hashGet");function gl(e){var r=this.__data__;return Ee?r[e]!==void 0:A.call(r,e)}i(gl,"hashHas");function ml(e,r){var t=this.__data__;return t[e]=Ee&&r===void 0?ht:r,this}i(ml,"hashSet");Y.prototype.clear=dl;Y.prototype.delete=pl;Y.prototype.get=_l;Y.prototype.has=gl;Y.prototype.set=ml;function q(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}i(q,"ListCache");function yl(){this.__data__=[]}i(yl,"listCacheClear");function wl(e){var r=this.__data__,t=nr(r,e);if(t<0)return!1;var n=r.length-1;return t==n?r.pop():al.call(r,t,1),!0}i(wl,"listCacheDelete");function bl(e){var r=this.__data__,t=nr(r,e);return t<0?void 0:r[t][1]}i(bl,"listCacheGet");function Tl(e){return nr(this.__data__,e)>-1}i(Tl,"listCacheHas");function vl(e,r){var t=this.__data__,n=nr(t,e);return n<0?t.push([e,r]):t[n][1]=r,this}i(vl,"listCacheSet");q.prototype.clear=yl;q.prototype.delete=wl;q.prototype.get=bl;q.prototype.has=Tl;q.prototype.set=vl;function D(e){var r=-1,t=e?e.length:0;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}i(D,"MapCache");function Cl(){this.__data__={hash:new Y,map:new(je||q),string:new Y}}i(Cl,"mapCacheClear");function Ol(e){return ir(this,e).delete(e)}i(Ol,"mapCacheDelete");function Pl(e){return ir(this,e).get(e)}i(Pl,"mapCacheGet");function Sl(e){return ir(this,e).has(e)}i(Sl,"mapCacheHas");function Al(e,r){return ir(this,e).set(e,r),this}i(Al,"mapCacheSet");D.prototype.clear=Cl;D.prototype.delete=Ol;D.prototype.get=Pl;D.prototype.has=Sl;D.prototype.set=Al;function Ze(e){var r=-1,t=e?e.length:0;for(this.__data__=new D;++r<t;)this.add(e[r])}i(Ze,"SetCache");function jl(e){return this.__data__.set(e,ht),this}i(jl,"setCacheAdd");function El(e){return this.__data__.has(e)}i(El,"setCacheHas");Ze.prototype.add=Ze.prototype.push=jl;Ze.prototype.has=El;function x(e){this.__data__=new q(e)}i(x,"Stack");function Rl(){this.__data__=new q}i(Rl,"stackClear");function Fl(e){return this.__data__.delete(e)}i(Fl,"stackDelete");function Ml(e){return this.__data__.get(e)}i(Ml,"stackGet");function xl(e){return this.__data__.has(e)}i(xl,"stackHas");function ql(e,r){var t=this.__data__;if(t instanceof q){var n=t.__data__;if(!je||n.length<Pu-1)return n.push([e,r]),this;t=this.__data__=new D(n)}return t.set(e,r),this}i(ql,"stackSet");x.prototype.clear=Rl;x.prototype.delete=Fl;x.prototype.get=Ml;x.prototype.has=xl;x.prototype.set=ql;function Dl(e,r){var t=N(e)||Pi(e)?Yu(e.length,String):[],n=t.length,s=!!n;for(var a in e)(r||A.call(e,a))&&!(s&&(a=="length"||Ti(a,n)))&&t.push(a);return t}i(Dl,"arrayLikeKeys");function nr(e,r){for(var t=e.length;t--;)if(Oi(e[t][0],r))return t;return-1}i(nr,"assocIndexOf");function Il(e,r,t,n){return Hl(e,function(s,a,o){r(n,s,t(s),o)}),n}i(Il,"baseAggregator");var Hl=Zl(Nl),Ll=ef();function Nl(e,r){return e&&Ll(e,r,er)}i(Nl,"baseForOwn");function yi(e,r){r=sr(r,e)?[r]:wi(r);for(var t=0,n=r.length;e!=null&&t<n;)e=e[ar(r[t++])];return t&&t==n?e:void 0}i(yi,"baseGet");function Bl(e){return he.call(e)}i(Bl,"baseGetTag");function $l(e,r){return e!=null&&r in Object(e)}i($l,"baseHasIn");function dt(e,r,t,n,s){return e===r?!0:e==null||r==null||!or(e)&&!ur(r)?e!==e&&r!==r:Gl(e,r,dt,t,n,s)}i(dt,"baseIsEqual");function Gl(e,r,t,n,s,a){var o=N(e),u=N(r),l=st,f=st;o||(l=L(e),l=l==Ke?le:l),u||(f=L(r),f=f==Ke?le:f);var c=l==le&&!ot(e),d=f==le&&!ot(r),h=l==f;if(h&&!c)return a||(a=new x),o||hf(e)?bi(e,r,t,n,s,a):rf(e,r,l,t,n,s,a);if(!(s&ce)){var m=c&&A.call(e,"__wrapped__"),y=d&&A.call(r,"__wrapped__");if(m||y){var C=m?e.value():e,v=y?r.value():r;return a||(a=new x),t(C,v,n,s,a)}}return h?(a||(a=new x),tf(e,r,t,n,s,a)):!1}i(Gl,"baseIsEqualDeep");function Ql(e,r,t,n){var s=t.length,a=s,o=!n;if(e==null)return!a;for(e=Object(e);s--;){var u=t[s];if(o&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++s<a;){u=t[s];var l=u[0],f=e[l],c=u[1];if(o&&u[2]){if(f===void 0&&!(l in e))return!1}else{var d=new x;if(n)var h=n(f,c,l,e,r,d);if(!(h===void 0?dt(c,f,n,rr|ce,d):h))return!1}}return!0}i(Ql,"baseIsMatch");function Ul(e){if(!or(e)||of(e))return!1;var r=Si(e)||ot(e)?il:Qu;return r.test(z(e))}i(Ul,"baseIsNative");function kl(e){return ur(e)&&gt(e.length)&&!!b[he.call(e)]}i(kl,"baseIsTypedArray");function Wl(e){return typeof e=="function"?e:e==null?gf:typeof e=="object"?N(e)?Xl(e[0],e[1]):Kl(e):mf(e)}i(Wl,"baseIteratee");function Vl(e){if(!uf(e))return ol(e);var r=[];for(var t in Object(e))A.call(e,t)&&t!="constructor"&&r.push(t);return r}i(Vl,"baseKeys");function Kl(e){var r=nf(e);return r.length==1&&r[0][2]?Ci(r[0][0],r[0][1]):function(t){return t===e||Ql(t,e,r)}}i(Kl,"baseMatches");function Xl(e,r){return sr(e)&&vi(r)?Ci(ar(e),r):function(t){var n=pf(t,e);return n===void 0&&n===r?_f(t,e):dt(r,n,void 0,rr|ce)}}i(Xl,"baseMatchesProperty");function Yl(e){return function(r){return yi(r,e)}}i(Yl,"basePropertyDeep");function zl(e){if(typeof e=="string")return e;if(mt(e))return ni?ni.call(e):"";var r=e+"";return r=="0"&&1/e==-ii?"-0":r}i(zl,"baseToString");function wi(e){return N(e)?e:lf(e)}i(wi,"castPath");function Jl(e,r){return function(t,n){var s=N(t)?Vu:Il,a=r?r():{};return s(t,e,Wl(n,2),a)}}i(Jl,"createAggregator");function Zl(e,r){return function(t,n){if(t==null)return t;if(!_t(t))return e(t,n);for(var s=t.length,a=r?s:-1,o=Object(t);(r?a--:++a<s)&&n(o[a],a,o)!==!1;);return t}}i(Zl,"createBaseEach");function ef(e){return function(r,t,n){for(var s=-1,a=Object(r),o=n(r),u=o.length;u--;){var l=o[e?u:++s];if(t(a[l],l,a)===!1)break}return r}}i(ef,"createBaseFor");function bi(e,r,t,n,s,a){var o=s&ce,u=e.length,l=r.length;if(u!=l&&!(o&&l>u))return!1;var f=a.get(e);if(f&&a.get(r))return f==r;var c=-1,d=!0,h=s&rr?new Ze:void 0;for(a.set(e,r),a.set(r,e);++c<u;){var m=e[c],y=r[c];if(n)var C=o?n(y,m,c,r,e,a):n(m,y,c,e,r,a);if(C!==void 0){if(C)continue;d=!1;break}if(h){if(!Ku(r,function(v,P){if(!h.has(P)&&(m===v||t(m,v,n,s,a)))return h.add(P)})){d=!1;break}}else if(!(m===y||t(m,y,n,s,a))){d=!1;break}}return a.delete(e),a.delete(r),d}i(bi,"equalArrays");function rf(e,r,t,n,s,a,o){switch(t){case ze:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case pi:return!(e.byteLength!=r.byteLength||!n(new ti(e),new ti(r)));case ai:case oi:case fi:return Oi(+e,+r);case ui:return e.name==r.name&&e.message==r.message;case ci:case hi:return e==r+"";case Xe:var u=Zu;case Ye:var l=a&ce;if(u||(u=rl),e.size!=r.size&&!l)return!1;var f=o.get(e);if(f)return f==r;a|=rr,o.set(e,r);var c=bi(u(e),u(r),n,s,a,o);return o.delete(e),c;case di:if(it)return it.call(e)==it.call(r)}return!1}i(rf,"equalByTag");function tf(e,r,t,n,s,a){var o=s&ce,u=er(e),l=u.length,f=er(r),c=f.length;if(l!=c&&!o)return!1;for(var d=l;d--;){var h=u[d];if(!(o?h in r:A.call(r,h)))return!1}var m=a.get(e);if(m&&a.get(r))return m==r;var y=!0;a.set(e,r),a.set(r,e);for(var C=o;++d<l;){h=u[d];var v=e[h],P=r[h];if(n)var be=o?n(P,v,h,r,e,a):n(v,P,h,e,r,a);if(!(be===void 0?v===P||t(v,P,n,s,a):be)){y=!1;break}C||(C=h=="constructor")}if(y&&!C){var E=e.constructor,R=r.constructor;E!=R&&"constructor"in e&&"constructor"in r&&!(typeof E=="function"&&E instanceof E&&typeof R=="function"&&R instanceof R)&&(y=!1)}return a.delete(e),a.delete(r),y}i(tf,"equalObjects");function ir(e,r){var t=e.__data__;return af(r)?t[typeof r=="string"?"string":"hash"]:t.map}i(ir,"getMapData");function nf(e){for(var r=er(e),t=r.length;t--;){var n=r[t],s=e[n];r[t]=[n,s,vi(s)]}return r}i(nf,"getMatchData");function de(e,r){var t=Ju(e,r);return Ul(t)?t:void 0}i(de,"getNative");var L=Bl;(ut&&L(new ut(new ArrayBuffer(1)))!=ze||je&&L(new je)!=Xe||lt&&L(lt.resolve())!=Xn||ft&&L(new ft)!=Ye||ct&&L(new ct)!=at)&&(L=i(function(e){var r=he.call(e),t=r==le?e.constructor:void 0,n=t?z(t):void 0;if(n)switch(n){case ul:return ze;case ll:return Xe;case fl:return Xn;case cl:return Ye;case hl:return at}return r},"getTag"));function sf(e,r,t){r=sr(r,e)?[r]:wi(r);for(var n,s=-1,o=r.length;++s<o;){var a=ar(r[s]);if(!(n=e!=null&&t(e,a)))break;e=e[a]}if(n)return n;var o=e?e.length:0;return!!o&&gt(o)&&Ti(a,o)&&(N(e)||Pi(e))}i(sf,"hasPath");function Ti(e,r){return r=r??si,!!r&&(typeof e=="number"||Uu.test(e))&&e>-1&&e%1==0&&e<r}i(Ti,"isIndex");function sr(e,r){if(N(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||mt(e)?!0:Lu.test(e)||!Hu.test(e)||r!=null&&e in Object(r)}i(sr,"isKey");function af(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}i(af,"isKeyable");function of(e){return!!ei&&ei in e}i(of,"isMasked");function uf(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||tr;return e===t}i(uf,"isPrototype");function vi(e){return e===e&&!or(e)}i(vi,"isStrictComparable");function Ci(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==void 0||e in Object(t))}}i(Ci,"matchesStrictComparable");var lf=pt(function(e){e=df(e);var r=[];return Nu.test(e)&&r.push(""),e.replace(Bu,function(t,n,s,a){r.push(s?a.replace(Gu,"$1"):n||t)}),r});function ar(e){if(typeof e=="string"||mt(e))return e;var r=e+"";return r=="0"&&1/e==-ii?"-0":r}i(ar,"toKey");function z(e){if(e!=null){try{return mi.call(e)}catch{}try{return e+""}catch{}}return""}i(z,"toSource");var ff=Jl(function(e,r,t){A.call(e,t)?e[t].push(r):e[t]=[r]});function pt(e,r){if(typeof e!="function"||r&&typeof r!="function")throw new TypeError(Su);var t=i(function(){var n=arguments,s=r?r.apply(this,n):n[0],a=t.cache;if(a.has(s))return a.get(s);var o=e.apply(this,n);return t.cache=a.set(s,o),o},"memoized");return t.cache=new(pt.Cache||D),t}i(pt,"memoize");pt.Cache=D;function Oi(e,r){return e===r||e!==e&&r!==r}i(Oi,"eq");function Pi(e){return cf(e)&&A.call(e,"callee")&&(!sl.call(e,"callee")||he.call(e)==Ke)}i(Pi,"isArguments");var N=Array.isArray;function _t(e){return e!=null&&gt(e.length)&&!Si(e)}i(_t,"isArrayLike");function cf(e){return ur(e)&&_t(e)}i(cf,"isArrayLikeObject");function Si(e){var r=or(e)?he.call(e):"";return r==li||r==Au}i(Si,"isFunction");function gt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=si}i(gt,"isLength");function or(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}i(or,"isObject");function ur(e){return!!e&&typeof e=="object"}i(ur,"isObjectLike");function mt(e){return typeof e=="symbol"||ur(e)&&he.call(e)==di}i(mt,"isSymbol");var hf=Zn?zu(Zn):kl;function df(e){return e==null?"":zl(e)}i(df,"toString");function pf(e,r,t){var n=e==null?void 0:yi(e,r);return n===void 0?t:n}i(pf,"get");function _f(e,r){return e!=null&&sf(e,r,$l)}i(_f,"hasIn");function er(e){return _t(e)?Dl(e):Vl(e)}i(er,"keys");function gf(e){return e}i(gf,"identity");function mf(e){return sr(e)?Xu(ar(e)):Yl(e)}i(mf,"property");fe.exports=ff});var Ei=p(pe=>{"use strict";var lr=pe&&pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pe,"__esModule",{value:!0});pe.HeaderTransformer=void 0;var ji=lr($n()),yf=lr(Fe()),wf=lr(Kn()),bf=lr(Ai()),yt=class{static{i(this,"HeaderTransformer")}constructor(r){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=r,r.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(r.headers)?this.setHeaders(r.headers):yf.default(r.headers)&&(this.headersTransform=r.headers)}transform(r,t){return this.shouldMapRow(r)?t(null,this.processRow(r)):t(null,{row:null,isValid:!0})}shouldMapRow(r){let{parserOptions:t}=this;if(!this.headersTransform&&t.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(r)){if(this.headersTransform)this.setHeaders(this.headersTransform(r));else if(this.shouldUseFirstRow)this.setHeaders(r);else return!0;return!1}return!0}processRow(r){if(!this.headers)return{row:r,isValid:!0};let{parserOptions:t}=this;if(!t.discardUnmappedColumns&&r.length>this.headersLength){if(!t.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${r.length}`);return{row:r,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${r.length}`}}return t.strictColumnHandling&&r.length<this.headersLength?{row:r,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${r.length}`}:{row:this.mapHeaders(r),isValid:!0}}mapHeaders(r){let t={},{headers:n,headersLength:s}=this;for(let a=0;a<s;a+=1){let o=n[a];if(!ji.default(o)){let u=r[a];ji.default(u)?t[o]="":t[o]=u}}return t}setHeaders(r){var t;let n=r.filter(s=>!!s);if(wf.default(n).length!==n.length){let s=bf.default(n),a=Object.keys(s).filter(o=>s[o].length>1);throw new Error(`Duplicate headers found ${JSON.stringify(a)}`)}this.headers=r,this.receivedHeaders=!0,this.headersLength=((t=this.headers)===null||t===void 0?void 0:t.length)||0}};pe.HeaderTransformer=yt});var Ri=p(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});_e.HeaderTransformer=_e.RowTransformerValidator=void 0;var Tf=Nn();Object.defineProperty(_e,"RowTransformerValidator",{enumerable:!0,get:function(){return Tf.RowTransformerValidator}});var vf=Ei();Object.defineProperty(_e,"HeaderTransformer",{enumerable:!0,get:function(){return vf.HeaderTransformer}})});var $=p(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.Token=void 0;var wt=class{static{i(this,"Token")}constructor(r){this.token=r.token,this.startCursor=r.startCursor,this.endCursor=r.endCursor}static isTokenRowDelimiter(r){let t=r.token;return t==="\r"||t===`
`||t===`\r
`}static isTokenCarriageReturn(r,t){return r.token===t.carriageReturn}static isTokenComment(r,t){return t.supportsComments&&!!r&&r.token===t.comment}static isTokenEscapeCharacter(r,t){return r.token===t.escapeChar}static isTokenQuote(r,t){return r.token===t.quote}static isTokenDelimiter(r,t){return r.token===t.delimiter}};fr.Token=wt});var Tt=p(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.Scanner=void 0;var Fi=$(),Cf=/((?:\r\n)|\n|\r)/,bt=class{static{i(this,"Scanner")}constructor(r){this.cursor=0,this.line=r.line,this.lineLength=this.line.length,this.parserOptions=r.parserOptions,this.hasMoreData=r.hasMoreData,this.cursor=r.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){let{lineFromCursor:r}=this,t=this.parserOptions.NEXT_TOKEN_REGEXP;if(r.search(t)===-1)return null;let n=t.exec(r);if(n==null)return null;let s=n[1],a=this.cursor+(n.index||0);return new Fi.Token({token:s,startCursor:a,endCursor:a+s.length-1})}get nextCharacterToken(){let{cursor:r,lineLength:t}=this;return t<=r?null:new Fi.Token({token:this.line[r],startCursor:r,endCursor:r})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){let r=Cf.exec(this.lineFromCursor);return r?(this.cursor+=(r.index||0)+r[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(r){return this.cursor=r,this}advanceToToken(r){return this.cursor=r.startCursor,this}advancePastToken(r){return this.cursor=r.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}};cr.Scanner=bt});var dr=p(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.ColumnFormatter=void 0;var vt=class{static{i(this,"ColumnFormatter")}constructor(r){r.trim?this.format=t=>t.trim():r.ltrim?this.format=t=>t.trimLeft():r.rtrim?this.format=t=>t.trimRight():this.format=t=>t}};hr.ColumnFormatter=vt});var Ot=p(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.NonQuotedColumnParser=void 0;var Of=dr(),Mi=$(),Ct=class{static{i(this,"NonQuotedColumnParser")}constructor(r){this.parserOptions=r,this.columnFormatter=new Of.ColumnFormatter(r)}parse(r){if(!r.hasMoreCharacters)return null;let{parserOptions:t}=this,n=[],s=r.nextCharacterToken;for(;s&&!(Mi.Token.isTokenDelimiter(s,t)||Mi.Token.isTokenRowDelimiter(s));s=r.nextCharacterToken)n.push(s.token),r.advancePastToken(s);return this.columnFormatter.format(n.join(""))}};pr.NonQuotedColumnParser=Ct});var St=p(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.QuotedColumnParser=void 0;var Pf=dr(),ge=$(),Pt=class{static{i(this,"QuotedColumnParser")}constructor(r){this.parserOptions=r,this.columnFormatter=new Pf.ColumnFormatter(r)}parse(r){if(!r.hasMoreCharacters)return null;let t=r.cursor,{foundClosingQuote:n,col:s}=this.gatherDataBetweenQuotes(r);if(!n){if(r.advanceTo(t),!r.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${r.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(r),s}gatherDataBetweenQuotes(r){let{parserOptions:t}=this,n=!1,s=!1,a=[],o=r.nextCharacterToken;for(;!s&&o!==null;o=r.nextCharacterToken){let u=ge.Token.isTokenQuote(o,t);if(!n&&u)n=!0;else if(n)if(ge.Token.isTokenEscapeCharacter(o,t)){r.advancePastToken(o);let l=r.nextCharacterToken;l!==null&&(ge.Token.isTokenQuote(l,t)||ge.Token.isTokenEscapeCharacter(l,t))?(a.push(l.token),o=l):u?s=!0:a.push(o.token)}else u?s=!0:a.push(o.token);r.advancePastToken(o)}return{col:this.columnFormatter.format(a.join("")),foundClosingQuote:s}}checkForMalformedColumn(r){let{parserOptions:t}=this,{nextNonSpaceToken:n}=r;if(n){let s=ge.Token.isTokenDelimiter(n,t),a=ge.Token.isTokenRowDelimiter(n);if(!(s||a)){let o=r.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${t.escapedDelimiter}' OR new line got: '${n.token}'. at '${o}`)}r.advanceToToken(n)}else r.hasMoreData||r.advancePastLine()}};_r.QuotedColumnParser=Pt});var xi=p(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.ColumnParser=void 0;var Sf=Ot(),Af=St(),jf=$(),At=class{static{i(this,"ColumnParser")}constructor(r){this.parserOptions=r,this.quotedColumnParser=new Af.QuotedColumnParser(r),this.nonQuotedColumnParser=new Sf.NonQuotedColumnParser(r)}parse(r){let{nextNonSpaceToken:t}=r;return t!==null&&jf.Token.isTokenQuote(t,this.parserOptions)?(r.advanceToToken(t),this.quotedColumnParser.parse(r)):this.nonQuotedColumnParser.parse(r)}};gr.ColumnParser=At});var jt=p(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.ColumnFormatter=j.QuotedColumnParser=j.NonQuotedColumnParser=j.ColumnParser=void 0;var Ef=xi();Object.defineProperty(j,"ColumnParser",{enumerable:!0,get:function(){return Ef.ColumnParser}});var Rf=Ot();Object.defineProperty(j,"NonQuotedColumnParser",{enumerable:!0,get:function(){return Rf.NonQuotedColumnParser}});var Ff=St();Object.defineProperty(j,"QuotedColumnParser",{enumerable:!0,get:function(){return Ff.QuotedColumnParser}});var Mf=dr();Object.defineProperty(j,"ColumnFormatter",{enumerable:!0,get:function(){return Mf.ColumnFormatter}})});var Ft=p(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.RowParser=void 0;var xf=jt(),me=$(),Et="",Rt=class{static{i(this,"RowParser")}constructor(r){this.parserOptions=r,this.columnParser=new xf.ColumnParser(r)}static isEmptyRow(r){return r.join(Et).replace(/\s+/g,Et)===Et}parse(r){let{parserOptions:t}=this,{hasMoreData:n}=r,s=r,a=[],o=this.getStartToken(s,a);for(;o;){if(me.Token.isTokenRowDelimiter(o))return s.advancePastToken(o),!s.hasMoreCharacters&&me.Token.isTokenCarriageReturn(o,t)&&n?null:(s.truncateToCursor(),a);if(!this.shouldSkipColumnParse(s,o,a)){let u=this.columnParser.parse(s);if(u===null)return null;a.push(u)}o=s.nextNonSpaceToken}return n?null:(s.truncateToCursor(),a)}getStartToken(r,t){let n=r.nextNonSpaceToken;return n!==null&&me.Token.isTokenDelimiter(n,this.parserOptions)?(t.push(""),r.nextNonSpaceToken):n}shouldSkipColumnParse(r,t,n){let{parserOptions:s}=this;if(me.Token.isTokenDelimiter(t,s)){r.advancePastToken(t);let a=r.nextCharacterToken;if(!r.hasMoreCharacters||a!==null&&me.Token.isTokenRowDelimiter(a)||a!==null&&me.Token.isTokenDelimiter(a,s))return n.push(""),!0}return!1}};mr.RowParser=Rt});var Di=p(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.Parser=void 0;var qf=Tt(),qi=Ft(),Df=$(),Mt=class e{static{i(this,"Parser")}constructor(r){this.parserOptions=r,this.rowParser=new qi.RowParser(this.parserOptions)}static removeBOM(r){return r&&r.charCodeAt(0)===65279?r.slice(1):r}parse(r,t){let n=new qf.Scanner({line:e.removeBOM(r),parserOptions:this.parserOptions,hasMoreData:t});return this.parserOptions.supportsComments?this.parseWithComments(n):this.parseWithoutComments(n)}parseWithoutComments(r){let t=[],n=!0;for(;n;)n=this.parseRow(r,t);return{line:r.line,rows:t}}parseWithComments(r){let{parserOptions:t}=this,n=[];for(let s=r.nextCharacterToken;s!==null;s=r.nextCharacterToken)if(Df.Token.isTokenComment(s,t)){if(r.advancePastLine()===null)return{line:r.lineFromCursor,rows:n};if(!r.hasMoreCharacters)return{line:r.lineFromCursor,rows:n};r.truncateToCursor()}else if(!this.parseRow(r,n))break;return{line:r.line,rows:n}}parseRow(r,t){if(!r.nextNonSpaceToken)return!1;let s=this.rowParser.parse(r);return s===null?!1:(this.parserOptions.ignoreEmpty&&qi.RowParser.isEmptyRow(s)||t.push(s),!0)}};yr.Parser=Mt});var Ii=p(O=>{"use strict";Object.defineProperty(O,"__esModule",{value:!0});O.QuotedColumnParser=O.NonQuotedColumnParser=O.ColumnParser=O.Token=O.Scanner=O.RowParser=O.Parser=void 0;var If=Di();Object.defineProperty(O,"Parser",{enumerable:!0,get:function(){return If.Parser}});var Hf=Ft();Object.defineProperty(O,"RowParser",{enumerable:!0,get:function(){return Hf.RowParser}});var Lf=Tt();Object.defineProperty(O,"Scanner",{enumerable:!0,get:function(){return Lf.Scanner}});var Nf=$();Object.defineProperty(O,"Token",{enumerable:!0,get:function(){return Nf.Token}});var xt=jt();Object.defineProperty(O,"ColumnParser",{enumerable:!0,get:function(){return xt.ColumnParser}});Object.defineProperty(O,"NonQuotedColumnParser",{enumerable:!0,get:function(){return xt.NonQuotedColumnParser}});Object.defineProperty(O,"QuotedColumnParser",{enumerable:!0,get:function(){return xt.QuotedColumnParser}})});var Dt=p(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});wr.CsvParserStream=void 0;var Bf=require("string_decoder"),$f=require("stream"),Hi=Ri(),Gf=Ii(),qt=class e extends $f.Transform{static{i(this,"CsvParserStream")}constructor(r){super({objectMode:r.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=r,this.parser=new Gf.Parser(r),this.headerTransformer=new Hi.HeaderTransformer(r),this.decoder=new Bf.StringDecoder(r.encoding),this.rowTransformerValidator=new Hi.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(r){return this.rowTransformerValidator.rowTransform=r,this}validate(r){return this.rowTransformerValidator.rowValidator=r,this}emit(r,...t){return r==="end"?(this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1):super.emit(r,...t)}_transform(r,t,n){if(this.hasHitRowLimit)return n();let s=e.wrapDoneCallback(n);try{let{lines:a}=this,o=a+this.decoder.write(r),u=this.parse(o,!0);return this.processRows(u,s)}catch(a){return s(a)}}_flush(r){let t=e.wrapDoneCallback(r);if(this.hasHitRowLimit)return t();try{let n=this.lines+this.decoder.end(),s=this.parse(n,!1);return this.processRows(s,t)}catch(n){return t(n)}}parse(r,t){if(!r)return[];let{line:n,rows:s}=this.parser.parse(r,t);return this.lines=n,s}processRows(r,t){let n=r.length,s=i(a=>{let o=i(f=>{if(f)return t(f);if(a%100===0){setImmediate(()=>s(a+1));return}return s(a+1)},"callNext");if(this.checkAndEmitHeaders(),a>=n||this.hasHitRowLimit)return t();if(this.parsedLineCount+=1,this.shouldSkipLine)return o();let u=r[a];this.rowCount+=1,this.parsedRowCount+=1;let l=this.rowCount;return this.transformRow(u,(f,c)=>{if(f)return this.rowCount-=1,o(f);if(!c)return o(new Error("expected transform result"));if(!c.isValid)this.emit("data-invalid",c.row,l,c.reason);else if(c.row)return this.pushRow(c.row,o);return o()})},"iterate");s(0)}transformRow(r,t){try{this.headerTransformer.transform(r,(n,s)=>n?t(n):s?s.isValid?s.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(s.row,t):this.skipRow(t):(this.rowCount-=1,this.parsedRowCount-=1,t(null,{row:null,isValid:!0})):this.shouldEmitRows?t(null,{isValid:!1,row:r}):this.skipRow(t):t(new Error("Expected result from header transform")))}catch(n){t(n)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(r){return this.rowCount-=1,r(null,{row:null,isValid:!0})}pushRow(r,t){try{this.parserOptions.objectMode?this.push(r):this.push(JSON.stringify(r)),t()}catch(n){t(n)}}static wrapDoneCallback(r){let t=!1;return(n,...s)=>{if(n){if(t)throw n;t=!0,r(n);return}r(...s)}}};wr.CsvParserStream=qt});var Ni=p(T=>{"use strict";var Li=T&&T.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Qf=T&&T.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),Uf=T&&T.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Li(r,e,t);return Qf(r,e),r},kf=T&&T.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&Li(r,e,t)};Object.defineProperty(T,"__esModule",{value:!0});T.parseString=T.parseFile=T.parseStream=T.parse=T.ParserOptions=T.CsvParserStream=void 0;var Wf=Uf(require("fs")),Vf=require("stream"),br=Kr(),Tr=Dt();kf(Xr(),T);var Kf=Dt();Object.defineProperty(T,"CsvParserStream",{enumerable:!0,get:function(){return Kf.CsvParserStream}});var Xf=Kr();Object.defineProperty(T,"ParserOptions",{enumerable:!0,get:function(){return Xf.ParserOptions}});T.parse=e=>new Tr.CsvParserStream(new br.ParserOptions(e));T.parseStream=(e,r)=>e.pipe(new Tr.CsvParserStream(new br.ParserOptions(r)));T.parseFile=(e,r={})=>Wf.createReadStream(e).pipe(new Tr.CsvParserStream(new br.ParserOptions(r)));T.parseString=(e,r)=>{let t=new Vf.Readable;return t.push(e),t.push(null),t.pipe(new Tr.CsvParserStream(new br.ParserOptions(r)))}});var Bi=p(g=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.CsvParserStream=g.ParserOptions=g.parseFile=g.parseStream=g.parseString=g.parse=g.FormatterOptions=g.CsvFormatterStream=g.writeToPath=g.writeToString=g.writeToBuffer=g.writeToStream=g.write=g.format=void 0;var G=Dn();Object.defineProperty(g,"format",{enumerable:!0,get:function(){return G.format}});Object.defineProperty(g,"write",{enumerable:!0,get:function(){return G.write}});Object.defineProperty(g,"writeToStream",{enumerable:!0,get:function(){return G.writeToStream}});Object.defineProperty(g,"writeToBuffer",{enumerable:!0,get:function(){return G.writeToBuffer}});Object.defineProperty(g,"writeToString",{enumerable:!0,get:function(){return G.writeToString}});Object.defineProperty(g,"writeToPath",{enumerable:!0,get:function(){return G.writeToPath}});Object.defineProperty(g,"CsvFormatterStream",{enumerable:!0,get:function(){return G.CsvFormatterStream}});Object.defineProperty(g,"FormatterOptions",{enumerable:!0,get:function(){return G.FormatterOptions}});var ye=Ni();Object.defineProperty(g,"parse",{enumerable:!0,get:function(){return ye.parse}});Object.defineProperty(g,"parseString",{enumerable:!0,get:function(){return ye.parseString}});Object.defineProperty(g,"parseStream",{enumerable:!0,get:function(){return ye.parseStream}});Object.defineProperty(g,"parseFile",{enumerable:!0,get:function(){return ye.parseFile}});Object.defineProperty(g,"ParserOptions",{enumerable:!0,get:function(){return ye.ParserOptions}});Object.defineProperty(g,"CsvParserStream",{enumerable:!0,get:function(){return ye.CsvParserStream}})});var $i=It(require("fs")),Cr=It(Bi());var Q=class{static{i(this,"MathUtils")}static getX(r,t){return r%t}static getY(r,t){return Math.floor(r/t)}static getIndexFromXY(r,t,n){return t*n+r}static getCellSpeedX(r,t,n){return t<-r+n&&t<r?-1:t>=-r+n-1&&t>=r+1?1:0}static getCellSpeedY(r,t,n){if(t<-r+n&&t<r||t>=-r+n-1&&t>=r+1)return 0;let s=Math.floor(n/2);return r===s&&t===s&&n%2===1?0:r>=s?-1:1}};var we=class{static{i(this,"OutputRowUtils")}static createInvalid(r){return{id:r,json:"[]",is_valid:!1}}static createValid(r,t){return{id:r,json:JSON.stringify(t),is_valid:!0}}};var vr=class e{static{i(this,"Transform")}static{this.transformRow=r=>{let t=e.parseArray(r.json);if(t===null)return we.createInvalid(r.id);let n=e.transformArray(t);return n===null?we.createInvalid(r.id):we.createValid(r.id,n)}}static parseArray(r){let t;try{t=JSON.parse(r)}catch(n){if(n instanceof SyntaxError)return null;throw n}return Array.isArray(t)?t:null}static transformArray(r){let t=Math.sqrt(r.length);if(!(t===Math.floor(t)))return null;let s=new Array(r.length);return r.forEach((a,o)=>{let u=Q.getX(o,t),l=Q.getY(o,t),f=u+Q.getCellSpeedX(u,l,t),c=l+Q.getCellSpeedY(u,l,t),d=Q.getIndexFromXY(f,c,t);s[d]=a}),s}};var Yf=process.argv[2];$i.createReadStream(Yf).pipe(Cr.parse({headers:!0})).pipe(Cr.format({headers:!0})).transform(vr.transformRow).pipe(process.stdout);
//# sourceMappingURL=cli.js.map
